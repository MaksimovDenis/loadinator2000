# üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash   
git clone https://github.com/MaksimovDenis/Avito_merch_shop.git
```
### 2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –í—ã –Ω–µ –≤ –Ω–µ–π).  
```bash  
cd Avito_merch_shop  
```  
### 3. –ò–∑ –¥–µ—Ä–∏–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã, —Å–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø–æ—Ä—Ç—É 8080:  
```bash      
docker compose up --build 
```  
### 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞  
```bash      
docker compose down
```
### 5. –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞ (–∏–∑ –¥–µ—Ä–∏–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞)
```bash
golangci-lint run -c .golangci.yml
```
P.S. –ú–∏–≥—Ä–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü –Ω–∞–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.  

# üõ†–†–µ–∞–ª–∏–∑–∞—Ü–∏—è  
- –ü–æ–¥—Ö–æ–¥ —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (—Å–µ—Ä–≤–∏—Å —Ä–∞–∑–±–∏—Ç –Ω–∞ DLA, BLL –∏ API —Å–ª–æ–∏).  
- –Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ: Golang 1.22.12  
- –î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ http —Å–µ—Ä–≤–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ gin  
- –ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è oapi-codegen  
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: PostgreSQL:latest
- –í –∫–∞—á–µ—Å—Ç–≤–µ –±–∏–ª–¥–µ—Ä–∞ sql –ø—Ä–∏–º–µ–Ω—è–ª—Å—è squirrel 
- –°—Ö–µ–º–∞ –ë–î:  
 ![–°—Ö–µ–º–∞ –ë–î](images/13.png)  
- –õ–æ–≥–µ—Ä zerolog   
- –õ–∏–Ω–∏—Ç–µ—Ä golangci-lint:  

```bash  
run:
  timeout: 5m

linters-settings:
  revive:
    rules:
      - name: empty-lines
  varnamelen:
    check-receiver: true
    check-return: true
    check-type-param: true
    ignore-type-assert-ok: true
    ignore-map-index-ok: true
    ignore-chan-recv-ok: true
    ignore-names:
      - err
      - ok
      - tx
      - id
      - tc # testCase for tests
      - tt # testCase for tests
      - pg
      - f # func(f)
    ignore-decls:
      - t testing.T
      - T any
      - e error
      - w http.ResponseWriter
      - r *http.Request
      - wg *sync.WaitGroup
      - wg sync.WaitGroup
      - T comparable
      - w io.Writer

linters:
  enable:
    - revive
    - bodyclose
    - gocritic
    - lll
    - wsl
    - gofmt
    - unparam # disabled in CI
    - varnamelen # disabled in CI  
```    
# ‚úÖ –£—Å–ª–æ–≤–∏—è  
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã–π –∫ –¢–ó API, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: https://github.com/MaksimovDenis/Avito_merch_shop/blob/main/pkg/protocol/oapi/schema.yml ‚úÖ    
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –∫ API –≤—ã–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü—Ä–∏ –ø–µ—Ä–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–≤–∞—Ç—ë—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.‚úÖ   
3. –ë–∏–∑–Ω–µ—Å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ (service) –∏ —é–Ω–∏—Ç —Ç–µ—Å—Ç–∞–º–∏.‚úÖ     
4. –°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ 100–∫, RPS ‚Äî 1k, SLI –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ ‚Äî 50 –º—Å, SLI —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞ ‚Äî 99.99% ‚úÖ  

# üîß–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
1. –õ–∏–Ω—Ç–µ—Ä .golangci.yaml –ø—Ä–∏–ª–æ–∂–µ–Ω –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞.‚úÖ
2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.‚úÖ
3. –ü—Ä–æ–≤–µ–¥–µ–Ω–æ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é APache JMeter 5.6.3 (RPS 1k, —Ç–µ—Å—Ç –ø–ª–∞–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)‚úÖ
 - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–≤ —Å—Ä–µ–¥–Ω–µ–º –æ—Ç–≤–µ—Ç –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 10ms): 
   ![Summary Report](images/1.png)  
   ![Response Time Graph](images/2.png)

# üöß –•–æ–¥ —Ä–µ—à–µ–Ω–∏—è
 - –ö–∞–∫ —Ç–∞–∫–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º –Ω–µ –≤–æ–∑–Ω–∏–∫–ª–æ, –≤ –±–∏–∑–Ω–µ—Å —Å–ª–æ–µ –æ–ø–∏—Å–∞–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å –ª–æ–≥–∏–∫–æ–π —Ä–∞–±–æ—Ç—ã.    

# üßë‚Äçüíª–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Ññ1 –∏ ‚Ññ2): **POST /api/auth**  
   ![–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Ññ1](images/3.png)  
   ![–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Ññ2](images/4.png)  
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞: book): **GET /api/buy/book**  
   ![–ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞: book](images/5.png) 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞: pen): **GET /api/buy/pen**  
   ![–ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞: pen](images/6.png) 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ü–æ–∫—É–ø–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞: pens): **GET /api/buy/pens**  
   ![–ü–æ–∫—É–ø–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞: pens](images/7.png) 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é user2): **POST /api/sendCoin**  
   ![–ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é user2](images/8.png) 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –ø—Ä–µ–≤—ã—à–µ—é—â–∏—Ö –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è): **POST /api/sendCoin**  
   ![–ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –ø—Ä–µ–≤—ã—à–µ—é—â–∏—Ö –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](images/9.png) 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ —Å–∞–º–æ–º—É —Å–µ–±–µ): **POST /api/sendCoin**  
   ![–ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ —Å–∞–º–æ–º—É —Å–µ–±–µ](images/10.png) 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è user1): **GET /api/info**  
   ![–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è user1](images/11.png) 
 - –≠–Ω–¥–ø–æ–∏–Ω—Ç (–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è user2): **GET /api/info**  
   ![–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∞–ª–∞–Ω—Å–µ –∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è user2](images/12.png) 

# üöß –ß—Ç–æ —Å–ª–µ–¥—É–µ—Ç —É–ª—É—á—à–∏—Ç—å  
- –°—Ç–æ–∏—Ç —É–ª—É—á—à–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª–µ–π, –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —É—á—Ç–µ–Ω—ã, –Ω–æ –Ω–µ –≤—Å–µ.  
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–ª—É—á—à–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫.  
- –î–æ–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥ –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç–µ—Å—Ç–æ–≤.  
- –î–æ–ø–æ–ª–Ω–∏—Ç—å —Å–µ—Ä–≤–∏—Å —Å–∏—Å—Ç–µ–º–æ–π –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Redis, –ø–æ –ø–∞—Ç–µ—Ä–Ω—É Singleton.
- –•–æ—Ä–æ—à–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å refresh –∏ access —Ç–æ–∫–µ–Ω–∞–º–∏.  

# –ò–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ (–¥–ª—è —Å–µ–±—è)     
- –î–æ–ø–æ–ª–Ω–∏–ª —Å–µ—Ä–≤–∏—Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ http –º–µ—Ç—Ä–∏–∫–∞–º–∏. –ü–æ –µ–Ω–¥–ø–æ–∏–Ω—Ç—É **GET /metrics**    
- –°–±–æ—Ä –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ prometheus.   
- –õ–æ–∫–∞–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á–∏–ª grafana, –Ω–æ –≤ —Å–±–æ—Ä–∫—É –¥–æ–∫–µ—Ä–∞ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–µ —Å—Ç–∞–ª, —á—Ç–æ–±—ã –Ω–µ —É—Ç—è–∂–µ–ª—è—Ç—å –∑–∞–ø—É—Å–∫.   
  ![grafana](images/14.png)   